<!DOCTYPE html>
<html>
<head>
  <title>SkyCrafter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      margin-bottom: 10px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
    }
    button {
      cursor: pointer;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 15px;
    }
    .card {
      background: #020617;
      border-radius: 8px;
      padding: 15px;
    }
    .label {
      color: #94a3b8;
      font-size: 14px;
    }
    .value {
      font-size: 18px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>SkyCrafter</h1>

<input id="username" placeholder="Enter username">
<button onclick="search()">Search</button>

<div id="content" style="margin-top:20px"></div>

<script>
  async function search() {
    const username = document.getElementById("username").value.trim()
    if (!username) return

    const res = await fetch(
      `https://skycrafter.finbob512.workers.dev/?username=${username}`
    )
    const data = await res.json()
    render(data)
  }

  function render(data) {
    const rankColor = getRankColor(data.selectedRank)
    const networkLevel = Math.floor(data.networkExp / 10000) // placeholder formula
    const pet = formatPet(data.selectedPet)

    document.getElementById("content").innerHTML = `
      <div class="grid">

        <div class="card">
          <h2>Player</h2>
          <div class="label">Name</div>
          <div class="value">${data.name}</div>

          <div class="label">Rank</div>
          <div class="value" style="color:${rankColor}">
            ${data.selectedRank ?? "None"}
          </div>

          <div class="label">Last Server</div>
          <div class="value">${data.lastServer}</div>
        </div>

        <div class="card">
          <h2>Network</h2>
          <div class="label">Level</div>
          <div class="value">${networkLevel}</div>

          <div class="label">Coins</div>
          <div class="value">${data.networkCoins.toLocaleString()}</div>
        </div>

        <div class="card">
          <h2>Cosmetics</h2>
          <div class="label">Pet</div>
          <div class="value">${pet}</div>

          <div class="label">Gadget</div>
          <div class="value">${data.selectedGadget ?? "None"}</div>
        </div>

      </div>
    `
  }

  function getRankColor(rank) {
    const map = {
      MODERATOR: "#3b82f6",
      ADMIN: "#f97316",
      SENIOR_MODERATOR: "#1e40af",
      HELPER: "#2dd4bf",
      TRAINEE: "#facc15",
      GOLD: "#fbbf24",
      DIAMOND: "#7dd3fc",
      EMERALD: "#22c55e"
    }
    return map[rank] ?? "#e5e7eb"
  }

  function formatPet(pet) {
    if (!pet) return "None"
    const map = {
      pet_snowman: "â˜ƒï¸ Snowman",
      pet_zombie: "ğŸ§Ÿ Zombie",
      pet_cat: "ğŸ± Cat",
      pet_dog: "ğŸ¶ Dog",
      pet_cow: "ğŸ® Cow",
      pet_pig: "ğŸ· Pig",
      pet_creeper: "ğŸ’¥ Creeper",
      pet_enderman: "ğŸ‘ï¸ Enderman"
    }
    return map[pet] ?? "ğŸ¾ " + pet.replace("pet_", "")
  }
</script>

</body>
</html>
